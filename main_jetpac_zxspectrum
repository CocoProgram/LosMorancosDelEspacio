#include <stdio.h>
#include <stdlib.h>

#include <esat/window.h>
#include <esat/draw.h>
#include <esat/input.h>
#include <esat/sprite.h>
#include <esat/time.h>

unsigned char fps=25;

const int kWindowX = 768, kWindowY = 576;

enum GamePhase { kGamePhase_Menu, kGamePhase_InGame, kGamePhase_EndGame };

double current_time,last_time;


bool g_derecha, g_izquierda, g_jetpac, g_dispara;


void BoleanasTeclas(){ //EN ESTE VOID LLAMAMOS A LAS BOOLEANAS QUE INDICAN LA ACTIVACIÃ“N DE LAS TECLAS
  esat::IsSpecialKeyPressed(kSpecialKey_Left) != NULL ? g_izquierda = true : g_izquierda = false;
  esat::IsSpecialKeyPressed(kSpecialKey_Right) != NULL ? g_derecha = true : g_derecha = false;
  esat::IsSpecialKeyPressed(kSpecialKey_Space) != NULL ? g_jetpac = true : g_jetpac = false;
  esat::IsKeyPressed('D') != NULL ? g_dispara = true : g_dispara = false;
}







int esat::main(int argc, char **argv) {


	esat::WindowInit(kWindowX,kWindowY);
	WindowSetMouseVisibility(true);

    while(esat::WindowIsOpened() && !esat::IsSpecialKeyDown(esat::kSpecialKey_Escape)) {

    	last_time = esat::Time();
    	esat::DrawBegin();
    	esat::DrawClear(0,0,0);

			BoleanasTeclas();


    	esat::DrawEnd();



    	//Control fps
    	do{
    		current_time = esat::Time();
    	}while((current_time-last_time)<=1000.0/fps);
    	esat::WindowFrame();
  }


  esat::WindowDestroy();


  return 0;

}
